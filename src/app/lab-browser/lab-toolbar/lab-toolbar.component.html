<md-toolbar color="primary">
  <div fxLayout fxLayoutAlign="space-between center" fxFlex class="padded">
    <ml-logo></ml-logo>
    <div fxLayout >
      <button md-button (click)="run()" *ngIf="!context.isRunning()"><md-icon>cached</md-icon> Run</button>
      <button md-button (click)="stop()" *ngIf="context.isRunning()"><md-icon>stop</md-icon> Stop</button>
      <button md-button (click)="fork()"><md-icon>share</md-icon> Fork</button>
      <button *ngIf="lab?.user_id == user?.uid" md-raised-button (click)="save()"><md-icon>save</md-icon> Save</button>

      <!-- menu opens when trigger button is clicked -->
      <button md-icon-button [md-menu-trigger-for]="menu">
        <md-icon *ngIf="user?.isAnonymous">more_vert</md-icon>
        <img *ngIf="user && !user.isAnonymous" src="{{user.photoURL}}" alt="{{user.displayName}} profile picture" class="ml-login-avatar">
      </button>

      <md-menu #menu="mdMenu">
          <button md-menu-item *ngIf="user?.isAnonymous" (click)="login()"><md-icon>perm_identity</md-icon>Login with GitHub</button>
          <button *ngIf="!user?.isAnonymous" (click)="logout()" md-menu-item><md-icon>exit_to_app</md-icon>Sign Out</button>
      </md-menu>
    </div>
  </div>
</md-toolbar>
