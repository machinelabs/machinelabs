<div fxLayout="column" style="height: 100%;">
<ml-toolbar
  [lab]="lab"
  [context]="context"
  (action)="toolbarAction($event)"
  ></ml-toolbar>
  <md-sidenav-container>
    <md-sidenav opened="true" mode="side" #sidenav class="ml-sidebar">
      <ml-panel panelTitle="Files">
        <ml-file-tree
          [files]="lab.files"
          [selectedFile]="activeFile"
          (selectFile)="openFile($event)"
          (removeFile)="deleteFile($event)"
          (addFile)="openAddFileDialog()"></ml-file-tree>
      </ml-panel>
    </md-sidenav>
    <div role="main" fxLayout>
      <ml-panel [panelTitle]="activeFile.name" fxFlex="50">
        <ml-ace-editor
          #editor
          [(value)]="activeFile.content"
          mode="python"></ml-ace-editor>
      </ml-panel>
      <ml-panel panelTitle="Output" fxFlex="50">
        <ml-ace-editor
          [value]="output | async"
          [readOnly]="true"
          [showGutter]="false"
          mode="sh"></ml-ace-editor>
      </ml-panel>
    </div>
  </md-sidenav-container>
  <div class="ml-footer">
    <div fxLayout="row" fxLayoutAlign="space-between center">
      <md-slide-toggle
        color="accent"
        [checked]="true"
        (click)="sidenav.toggle()">File browser</md-slide-toggle>
      <div class="ml-footer__status">
        <div *ngIf="context.isRunning()">
          <md-progress-bar
            color="accent"
            [bufferValue]="0"
            mode="indeterminate"></md-progress-bar>
        </div>
      </div>
      <div>
        <button disabled md-button md-raised-button md-primary class="elevated">Share</button>
        <button disabled md-button md-raised-button md-primary class="elevated">Embed</button>
      </div>
    </div>
  </div>
</div>
